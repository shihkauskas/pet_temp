# –ú–æ–Ω–∏—Ç–æ—Ä —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ Python –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –Ω–∞ Linux —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `lm-sensors`. –õ–æ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –Ω–æ—Ä–º–µ. –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ systemd-—Å–µ—Ä–≤–∏—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `pet-temp`.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (—è–¥—Ä–æ 0) –Ω–∞ Linux-—Ö–æ—Å—Ç–µ, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥-—Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ (`65¬∞C` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –∞–ª–µ—Ä—Ç —Å üö®.
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –Ω–æ—Ä–º–µ (‚â§ `60¬∞C` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å ‚úÖ.

–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `/opt/pet_temp/logs/temp_monitor.log` —Å —Ä–æ—Ç–∞—Ü–∏–µ–π (–º–∞–∫—Å. 10 –ú–ë, 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π). –î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —á–µ—Ä–µ–∑ `lm-sensors`.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—Ä–æ–≤–µ—Ä–∫–∏.
- –ó–∞–ø—É—Å–∫ –∫–∞–∫ systemd-—Å–µ—Ä–≤–∏—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `pet-temp`.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Linux-—Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ Ubuntu/Debian).
- Python 3.6+.
- `lm-sensors` –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
- –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –∏ ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ lm-sensors
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `lm-sensors` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ:
```bash
sudo apt update
sudo apt install lm-sensors
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
sensors
```
–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Core 0: +45.0¬∞C`). –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π —Å–µ–Ω—Å–æ—Ä, –∏–∑–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `get_temperature()` –≤ `/opt/pet_temp/temp_monitor_core.py`.

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è pet-temp
–°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `pet-temp` –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ª–æ–≥–∏–Ω–∞:
```bash
sudo useradd -r -s /bin/false pet-temp
```

### –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
```bash
git clone https://github.com/yourusername/temperature-monitor.git
sudo mkdir -p /opt/pet_temp/logs
sudo mv temperature-monitor/temp_monitor_core.py /opt/pet_temp/
sudo mv temperature-monitor/requirements.txt /opt/pet_temp/
```
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
```bash
sudo chown -R pet-temp:pet-temp /opt/pet_temp
sudo chmod -R 755 /opt/pet_temp
sudo chmod -R 775 /opt/pet_temp/logs
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ `/opt/pet_temp`:
```bash
sudo python3 -m venv /opt/pet_temp/venv
sudo /opt/pet_temp/venv/bin/pip install -r /opt/pet_temp/requirements.txt
```
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–ª—è `pet-temp`:
```bash
sudo chown -R pet-temp:pet-temp /opt/pet_temp/venv
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/opt/pet_temp/temp_monitor_core.py`, —É–∫–∞–∑–∞–≤ —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –∏ ID —á–∞—Ç–∞:
```python
TELEGRAM_TOKEN = 'YOUR_BOT_TOKEN'  # –ü–æ–ª—É—á–∏—Ç–µ —á–µ—Ä–µ–∑ @BotFather
TELEGRAM_CHAT_ID = 'YOUR_CHAT_ID'  # ID –≤–∞—à–µ–≥–æ —á–∞—Ç–∞
```
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):
- `THRESHOLD_TEMP`: –ü–æ—Ä–æ–≥ –¥–ª—è –∞–ª–µ—Ä—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 33¬∞C).
- `RECOVERY_THRESHOLD`: –ü–æ—Ä–æ–≥ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30¬∞C).
- `INTERVAL_SEC`: –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 60 —Å–µ–∫—É–Ω–¥).
- `SENSOR_COMMAND`: –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `sensors`).

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤—Ä—É—á–Ω—É—é –æ—Ç –∏–º–µ–Ω–∏ `pet-temp` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
sudo -u pet-temp /opt/pet_temp/venv/bin/python /opt/pet_temp/temp_monitor_core.py
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –õ–æ–≥–∏ –≤ `/opt/pet_temp/logs/temp_monitor.log`.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ > 33¬∞C (üö®) –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ ‚â§ 30¬∞C (‚úÖ).

### –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd-—Å–µ—Ä–≤–∏—Å–∞
–°–æ–∑–¥–∞–π—Ç–µ systemd unit –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –æ—Ç `pet-temp`:
```bash
sudo nano /etc/systemd/system/pet-temp-monitor.service
```
–î–æ–±–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```
[Unit]
Description=–°–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã Pet Temp
After=network.target

[Service]
User=pet-temp
Group=pet-temp
ExecStart=/opt/pet_temp/venv/bin/python /opt/pet_temp/temp_monitor_core.py
Restart=always

[Install]
WantedBy=multi-user.target
```
–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å:
```bash
sudo systemctl daemon-reload
sudo systemctl start pet-temp-monitor
sudo systemctl enable pet-temp-monitor
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
journalctl -u pet-temp-monitor
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. **–ß—Ç–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã**:
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `sensors` –∫–∞–∂–¥—ã–µ `INTERVAL_SEC` —Å–µ–∫—É–Ω–¥.
   - –ü–∞—Ä—Å–∏—Ç –≤—ã–≤–æ–¥ –¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã `Core 0` (–∏–∑–º–µ–Ω–∏—Ç–µ `get_temperature()` –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤).
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤ `/opt/pet_temp/logs/temp_monitor.log` –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `–ì–ì–ì–ì-–ú–ú-–î–î –ß–ß:–ú–ú:–°–°,mmm - Temperature: XX.X¬∞C`.
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `RotatingFileHandler` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–∞ (10 –ú–ë, 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π).
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
   - –ï—Å–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ > `THRESHOLD_TEMP` (33¬∞C), –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–ª–µ—Ä—Ç: `üö® –ê–õ–ï–†–¢: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–µ–≤—ã—Å–∏–ª–∞ 33¬∞C! –¢–µ–∫—É—â–∞—è: XX.X¬∞C`.
   - –ï—Å–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚â§ `RECOVERY_THRESHOLD` (30¬∞C) –ø–æ—Å–ª–µ –∞–ª–µ—Ä—Ç–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: `‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –∫ –Ω–æ—Ä–º–µ. –¢–µ–∫—É—â–∞—è: XX.X¬∞C`.
   - –§–ª–∞–≥ `alert_triggered` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–µ—Ä—Ç–æ–≤.
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   - –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö `sensors` –∏–ª–∏ Telegram API.
   - –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–£–∫–∞–∑–∞–Ω—ã –≤ `/opt/pet_temp/requirements.txt`:
- `requests==2.32.3`: –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram.
- `python-dateutil==2.9.0`: –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –ª–æ–≥–æ–≤.

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python:
- `subprocess`: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `sensors`.
- `logging`: –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ —Ä–æ—Ç–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤.
- `time`: –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—Ä–æ–≤–µ—Ä–∫–∏.

## –ü–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Flask —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ Chart.js.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, GPU, –¥—Ä—É–≥–∏–µ —è–¥—Ä–∞ CPU).
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `shoutrrr` –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–∞–Ω–∞–ª–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
- –£–ø–∞–∫–æ–≤–∫–∞ –≤ DEB-–ø–∞–∫–µ—Ç –∏–ª–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞ –±–∞–∑–µ Alpine).

## –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥
–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ issues –∏–ª–∏ –ø—Ä–∏—Å—ã–ª–∞–π—Ç–µ pull requests –Ω–∞ GitHub. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –∏–¥–µ–∏ –ø–æ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –∏ —É–ª—É—á—à–µ–Ω–∏—è–º!

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License