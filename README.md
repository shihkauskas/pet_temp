# –ú–æ–Ω–∏—Ç–æ—Ä —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ Python –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –Ω–∞ Linux —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `lm-sensors`. –õ–æ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏. –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–≤–∞ systemd-—Å–µ—Ä–≤–∏—Å–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `pet-temp`.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- **temp_monitor_core.py**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (—è–¥—Ä–æ 0), –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥-—Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:
  - –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ (`65¬∞C` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –∞–ª–µ—Ä—Ç —Å üö®.
  - –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –Ω–æ—Ä–º–µ (‚â§ `60¬∞C` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å ‚úÖ.
- **temp_monitor_web.py**: Flask-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –ª–æ–≥–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π (Chart.js, Tailwind CSS).

–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `/opt/pet_temp/logs/temp_monitor.log` —Å —Ä–æ—Ç–∞—Ü–∏–µ–π (–º–∞–∫—Å. 10 –ú–ë, 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π).

## –°–∫—Ä–∏–Ω—à–æ—Ç

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≥—Ä–∞—Ñ–∏–∫–æ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã:

![–ì—Ä–∞—Ñ–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã](web_page.png)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —á–µ—Ä–µ–∑ `lm-sensors`.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≥—Ä–∞—Ñ–∏–∫–æ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–∑—É–º, —Ç—É–ª—Ç–∏–ø—ã, –±–µ–∑ –≥–æ–¥–∞ –≤ –º–µ—Ç–∫–∞—Ö –≤—Ä–µ–º–µ–Ω–∏).
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—Ä–æ–≤–µ—Ä–∫–∏.
- –ó–∞–ø—É—Å–∫ –∫–∞–∫ systemd-—Å–µ—Ä–≤–∏—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `pet-temp`.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Linux-—Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ Ubuntu/Debian).
- Python 3.6+.
- `lm-sensors` –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
- –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –∏ ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ DEB-–ø–∞–∫–µ—Ç

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   sudo apt update
   sudo apt install python3 python3-venv lm-sensors
   ```
2. **–°–∫–∞—á–∞–π—Ç–µ DEB-–ø–∞–∫–µ—Ç**:
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ `pet-temp-monitor_1.0.0.deb` –∏–∑ [—Ä–µ–ª–∏–∑–æ–≤](https://github.com/yourusername/temperature-monitor/releases) –∏–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (—Å–º. –Ω–∏–∂–µ).
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç**:
   ```bash
   sudo dpkg -i pet-temp-monitor_1.0.0.deb
   ```
   –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
   ```bash
   sudo dpkg -i --force-depends pet-temp-monitor_1.0.0.deb
   sudo apt-get install -f
   ```
   –ü–∞–∫–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `pip` (`requests==2.32.3`, `python-dateutil==2.9.0`, `flask==3.0.3`).
   - –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `pet-temp` –±–µ–∑ –ª–æ–≥–∏–Ω–∞.
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/opt/pet_temp` –∏ `/opt/pet_temp/logs`.
   - –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `/opt/pet_temp/venv`.
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç systemd-—Å–µ—Ä–≤–∏—Å—ã (`pet-temp-monitor`, `pet-temp-web`).
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram**:
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/opt/pet_temp/temp_monitor_core.py`:
     ```python
     TELEGRAM_TOKEN = 'YOUR_BOT_TOKEN'  # –ü–æ–ª—É—á–∏—Ç–µ —á–µ—Ä–µ–∑ @BotFather
     TELEGRAM_CHAT_ID = 'YOUR_CHAT_ID'  # ID –≤–∞—à–µ–≥–æ —á–∞—Ç–∞
     ```
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:
     ```bash
     sudo systemctl restart pet-temp-monitor
     ```
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
   - –õ–æ–≥–∏: `/opt/pet_temp/logs/temp_monitor.log`.
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram: –ø—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ > 65¬∞C (üö®) –∏ ‚â§ 60¬∞C (‚úÖ).
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:8080 (–≥—Ä–∞—Ñ–∏–∫ –±–µ–∑ –≥–æ–¥–∞ –≤ –º–µ—Ç–∫–∞—Ö).
   - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
     ```bash
     systemctl status pet-temp-monitor
     systemctl status pet-temp-web
     ```

## –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ lm-sensors
```bash
sudo apt update
sudo apt install lm-sensors
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
sensors
```
–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, `Core 0: +45.0¬∞C`. –ò–∑–º–µ–Ω–∏—Ç–µ `get_temperature()` –≤ `/opt/pet_temp/temp_monitor_core.py`, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π —Å–µ–Ω—Å–æ—Ä.

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è pet-temp
```bash
sudo useradd -r -s /bin/false pet-temp
```

### –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/shihkauskas/pet_temp_monitor.git
sudo mkdir -p /opt/pet_temp/logs
sudo mv temperature-monitor/temp_monitor_core.py /opt/pet_temp/
sudo mv temperature-monitor/temp_monitor_web.py /opt/pet_temp/
sudo mv temperature-monitor/requirements.txt /opt/pet_temp/
```
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞:
```bash
sudo chown -R pet-temp:pet-temp /opt/pet_temp
sudo chmod -R 755 /opt/pet_temp
sudo chmod -R 775 /opt/pet_temp/logs
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
sudo python3 -m venv /opt/pet_temp/venv
sudo /opt/pet_temp/venv/bin/pip install -r /opt/pet_temp/requirements.txt
sudo chown -R pet-temp:pet-temp /opt/pet_temp/venv
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/opt/pet_temp/temp_monitor_core.py`:
```python
TELEGRAM_TOKEN = 'YOUR_BOT_TOKEN'
TELEGRAM_CHAT_ID = 'YOUR_CHAT_ID'
```

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
sudo -u pet-temp /opt/pet_temp/venv/bin/python /opt/pet_temp/temp_monitor_core.py
sudo -u pet-temp /opt/pet_temp/venv/bin/python /opt/pet_temp/temp_monitor_web.py
```

### –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd-—Å–µ—Ä–≤–∏—Å–æ–≤
–°–æ–∑–¥–∞–π—Ç–µ:
```bash
sudo nano /etc/systemd/system/pet-temp-monitor.service
```
–î–æ–±–∞–≤—å—Ç–µ:
```
[Unit]
Description=–°–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã Pet Temp
After=network.target

[Service]
User=pet-temp
Group=pet-temp
ExecStart=/opt/pet_temp/venv/bin/python /opt/pet_temp/temp_monitor_core.py
Restart=always

[Install]
WantedBy=multi-user.target
```
–°–æ–∑–¥–∞–π—Ç–µ:
```bash
sudo nano /etc/systemd/system/pet-temp-web.service
```
–î–æ–±–∞–≤—å—Ç–µ:
```
[Unit]
Description=–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã Pet Temp
After=network.target

[Service]
User=pet-temp
Group=pet-temp
ExecStart=/opt/pet_temp/venv/bin/python /opt/pet_temp/temp_monitor_web.py
Restart=always

[Install]
WantedBy=multi-user.target
```
–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ:
```bash
sudo systemctl daemon-reload
sudo systemctl start pet-temp-monitor
sudo systemctl start pet-temp-web
sudo systemctl enable pet-temp-monitor
sudo systemctl enable pet-temp-web
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (temp_monitor_core.py)
1. **–ß—Ç–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã**:
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç `sensors` –∫–∞–∂–¥—ã–µ `INTERVAL_SEC` —Å–µ–∫—É–Ω–¥.
   - –ü–∞—Ä—Å–∏—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É `Core 0` (–∏–∑–º–µ–Ω–∏—Ç–µ `get_temperature()` –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤).
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `/opt/pet_temp/logs/temp_monitor.log` –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `–ì–ì–ì–ì-–ú–ú-–î–î –ß–ß:–ú–ú:–°–°,mmm - Temperature: XX.X¬∞C`.
   - `RotatingFileHandler` (10 –ú–ë, 5 –∫–æ–ø–∏–π).
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ > `THRESHOLD_TEMP` (65¬∞C): `üö® –ê–õ–ï–†–¢: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–µ–≤—ã—Å–∏–ª–∞ 33¬∞C! –¢–µ–∫—É—â–∞—è: XX.X¬∞C`.
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚â§ `RECOVERY_THRESHOLD` (60¬∞C): `‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –∫ –Ω–æ—Ä–º–µ. –¢–µ–∫—É—â–∞—è: XX.X¬∞C`.
   - –§–ª–∞–≥ `alert_triggered` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏.
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   - –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ `sensors` –∏–ª–∏ Telegram API.

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (temp_monitor_web.py)
1. –ß–∏—Ç–∞–µ—Ç –ª–æ–≥–∏ –∑–∞ 30 –¥–Ω–µ–π.
2. –ì—Ä–∞—Ñ–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (Chart.js):
   - –ú–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏: `–¥–µ–Ω—å-–º–µ—Å—è—Ü —á–∞—Å—ã:–º–∏–Ω—É—Ç—ã` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `26-09 09:24`).
   - –ó—É–º (–∫–æ–ª–µ—Å–æ, —â–∏–ø–æ–∫), —Ç—É–ª—Ç–∏–ø—ã.
   - Tailwind CSS (–∏–∑—É–º—Ä—É–¥–Ω–∞—è –ª–∏–Ω–∏—è, —Ç–µ–Ω—å).
3. –ü–æ—Ä—Ç: 8080 (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `WEB_PORT`).

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–í `/opt/pet_temp/requirements.txt`:
- `requests==2.32.3`
- `python-dateutil==2.9.0`
- `flask==3.0.3`

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- `subprocess`
- `logging`
- `time`

## –ü–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `shoutrrr`.
- Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Alpine).

## –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥
–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ issues –∏–ª–∏ pull requests –Ω–∞ GitHub.

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License
